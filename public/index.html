<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CrowdFund3D - Decentralized Crowdfunding Platform</title>
  <meta name="description" content="Revolutionary blockchain-based crowdfunding platform. Create campaigns, fund dreams, and build the future with Ethereum smart contracts.">
  <meta name="keywords" content="crowdfunding, blockchain, ethereum, web3, dapp, fundraising">
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>🚀</text></svg>">
  <script src="https://cdn.jsdelivr.net/npm/react@18.2.0/umd/react.production.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/react-dom@18.2.0/umd/react-dom.production.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@babel/standalone@7.20.15/babel.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/web3@4.8.0/dist/web3.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/axios@1.6.7/dist/axios.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      margin: 0;
      overflow-x: hidden;
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
    }
    .card {
      transition: all 0.3s ease;
      backdrop-filter: blur(10px);
      background: rgba(255, 255, 255, 0.1);
      border: 1px solid rgba(255, 255, 255, 0.2);
    }
    .card:hover {
      transform: translateY(-8px) scale(1.02);
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
      background: rgba(255, 255, 255, 0.15);
    }
    .btn {
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }
    .btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
    }
    .btn::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
      transition: left 0.5s;
    }
    .btn:hover::before {
      left: 100%;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .fade-in {
      animation: fadeIn 0.6s ease-out;
    }
    @keyframes pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.05); }
    }
    .pulse {
      animation: pulse 2s infinite;
    }
    .campaign-image {
      width: 100%;
      height: 200px;
      object-fit: cover;
      border-radius: 12px;
      margin-bottom: 16px;
    }
    .hero-section {
      background: linear-gradient(rgba(0,0,0,0.4), rgba(0,0,0,0.4)), url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 600"><defs><linearGradient id="grad1" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" style="stop-color:%23667eea;stop-opacity:1" /><stop offset="100%" style="stop-color:%23764ba2;stop-opacity:1" /></linearGradient></defs><rect width="1200" height="600" fill="url(%23grad1)"/><circle cx="200" cy="150" r="60" fill="rgba(255,255,255,0.1)"/><circle cx="800" cy="400" r="80" fill="rgba(255,255,255,0.05)"/><circle cx="1000" cy="200" r="40" fill="rgba(255,255,255,0.1)"/></svg>');
      background-size: cover;
      background-position: center;
      padding: 60px 0;
      text-align: center;
    }
    .glassmorphism {
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: 16px;
    }
    .progress-bar {
      background: linear-gradient(90deg, #00d4ff, #090979);
      height: 8px;
      border-radius: 4px;
      position: relative;
      overflow: hidden;
    }
    .progress-bar::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
      animation: shimmer 2s infinite;
    }
    @keyframes shimmer {
      0% { transform: translateX(-100%); }
      100% { transform: translateX(100%); }
    }
    .floating {
      animation: floating 3s ease-in-out infinite;
    }
    @keyframes floating {
      0%, 100% { transform: translateY(0px); }
      50% { transform: translateY(-10px); }
    }
  </style>
</head>
<body>
  <div id="root"></div>
  <script type="text/babel">
    const { useState, useEffect } = React;
    const { createRoot } = ReactDOM;

    // Production configuration
    const contractAddress = '0x742d35Cc6634C0532925a3b8D404d1C8b2d69C42'; // Demo contract
    const RPC_URL = 'https://sepolia.infura.io/v3/demo-key'; // Demo RPC
    const API_BASE = window.location.origin + '/api';
    
    const contractABI = [
      {
        "anonymous": false,
        "inputs": [
          { "indexed": true, "internalType": "uint256", "name": "campaignId", "type": "uint256" },
          { "indexed": false, "internalType": "address", "name": "creator", "type": "address" },
          { "indexed": false, "internalType": "string", "name": "title", "type": "string" },
          { "indexed": false, "internalType": "uint256", "name": "goal", "type": "uint256" },
          { "indexed": false, "internalType": "uint256", "name": "deadline", "type": "uint256" }
        ],
        "name": "CampaignCreated",
        "type": "event"
      },
      {
        "inputs": [
          { "internalType": "uint256", "name": "", "type": "uint256" }
        ],
        "name": "campaigns",
        "outputs": [
          { "internalType": "address", "name": "creator", "type": "address" },
          { "internalType": "string", "name": "title", "type": "string" },
          { "internalType": "uint256", "name": "goal", "type": "uint256" },
          { "internalType": "uint256", "name": "deadline", "type": "uint256" },
          { "internalType": "uint256", "name": "raised", "type": "uint256" },
          { "internalType": "bool", "name": "completed", "type": "bool" }
        ],
        "stateMutability": "view",
        "type": "function"
      },
      {
        "inputs": [
          { "internalType": "uint256", "name": "_campaignId", "type": "uint256" }
        ],
        "name": "contribute",
        "outputs": [],
        "stateMutability": "payable",
        "type": "function"
      },
      {
        "inputs": [
          { "internalType": "string", "name": "_title", "type": "string" },
          { "internalType": "uint256", "name": "_goal", "type": "uint256" },
          { "internalType": "uint256", "name": "_deadline", "type": "uint256" }
        ],
        "name": "createCampaign",
        "outputs": [],
        "stateMutability": "nonpayable",
        "type": "function"
      },
      {
        "inputs": [
          { "internalType": "uint256", "name": "_campaignId", "type": "uint256" }
        ],
        "name": "releaseFunds",
        "outputs": [],
        "stateMutability": "nonpayable",
        "type": "function"
      },
      {
        "inputs": [],
        "name": "getCampaignCount",
        "outputs": [
          { "internalType": "uint256", "name": "", "type": "uint256" }
        ],
        "stateMutability": "view",
        "type": "function"
      }
    ];

    const App = () => {
      const [web3, setWeb3] = useState(null);
      const [contract, setContract] = useState(null);
      const [account, setAccount] = useState(null);
      const [campaigns, setCampaigns] = useState([]);
      const [privateKeyInput, setPrivateKeyInput] = useState('');
      const [showPrivateKeyInput, setShowPrivateKeyInput] = useState(true);
      const [isDemo, setIsDemo] = useState(true);

      useEffect(() => {
        fetchCampaigns();
      }, []);

      const disconnectWallet = () => {
        setAccount(null);
        setWeb3(null);
        setContract(null);
        setPrivateKeyInput('');
        setShowPrivateKeyInput(true);
      };

      const handlePrivateKeySubmit = (e) => {
        e.preventDefault();
        const key = e.target.privateKey.value.trim();
        if (key) {
          setPrivateKeyInput(key);
          initWeb3(key);
        }
      };

      const initWeb3 = async (userPrivateKey) => {
        try {
          if (!userPrivateKey || !/^(0x)?[0-9a-fA-F]{64}$/.test(userPrivateKey.replace(/^0x/, ''))) {
            throw new Error('Invalid private key format');
          }
          const web3Instance = new Web3(new Web3.providers.HttpProvider(RPC_URL));
          const accountFromPrivateKey = web3Instance.eth.accounts.privateKeyToAccount(userPrivateKey);
          web3Instance.eth.accounts.wallet.add(accountFromPrivateKey);
          web3Instance.eth.defaultAccount = accountFromPrivateKey.address;
          setWeb3(web3Instance);
          setContract(new web3Instance.eth.Contract(contractABI, contractAddress));
          setAccount(accountFromPrivateKey.address);
          setShowPrivateKeyInput(false);
          setIsDemo(false);
        } catch (err) {
          console.error('Web3 initialization failed:', err);
          alert('Web3 initialization failed. This is a demo - blockchain features are simulated. Error: ' + err.message);
          setIsDemo(true);
          setShowPrivateKeyInput(false);
          setAccount('0x742d35Cc6634C0532925a3b8D404d1C8b2d69C42'); // Demo account
        }
      };

      const fetchCampaigns = async () => {
        try {
          const response = await axios.get(`${API_BASE}/campaigns`);
          setCampaigns(response.data);
        } catch (err) {
          console.error('Error fetching campaigns:', err);
          // Set demo campaigns if API fails
          setCampaigns([
            {
              campaignId: 0,
              creator: '0x742d35Cc6634C0532925a3b8D404d1C8b2d69C42',
              title: 'Save the Ocean - Marine Conservation',
              goal: 5000000000000000000,
              deadline: Math.floor(Date.now() / 1000) + 2592000,
              raised: 1500000000000000000,
              completed: false
            },
            {
              campaignId: 1,
              creator: '0x8ba1f109551bD432803012645Hac136c30C6756',
              title: 'Tech Education for Underprivileged Kids',
              goal: 3000000000000000000,
              deadline: Math.floor(Date.now() / 1000) + 1728000,
              raised: 3200000000000000000,
              completed: true
            }
          ]);
        }
      };

      const createCampaign = async (e) => {
        e.preventDefault();
        const title = e.target.title.value;
        const goal = e.target.goal.value;
        const duration = e.target.duration.value;
        
        if (isDemo) {
          alert('🎉 Demo Mode: Campaign created successfully! In production, this would interact with the blockchain.');
          const newCampaign = {
            campaignId: campaigns.length,
            creator: account,
            title: title,
            goal: parseFloat(goal) * 1e18,
            deadline: Math.floor(Date.now() / 1000) + parseInt(duration) * 24 * 60 * 60,
            raised: 0,
            completed: false
          };
          setCampaigns([...campaigns, newCampaign]);
          e.target.reset();
          return;
        }

        try {
          const deadline = Math.floor(Date.now() / 1000) + parseInt(duration) * 24 * 60 * 60;
          await contract.methods.createCampaign(title, web3.utils.toWei(goal, 'ether'), deadline)
            .send({ from: account, gas: 1000000 });
          const campaignCount = await contract.methods.getCampaignCount().call();
          const campaignId = Number(campaignCount) - 1;
          const campaignData = await contract.methods.campaigns(campaignId).call();
          
          await axios.post(`${API_BASE}/save-campaign`, {
            campaignId,
            creator: campaignData.creator,
            title: campaignData.title,
            goal: Number(campaignData.goal),
            deadline: Number(campaignData.deadline),
            raised: Number(campaignData.raised),
            completed: campaignData.completed
          });
          
          const newCampaign = {
            ...campaignData,
            goal: Number(campaignData.goal),
            raised: Number(campaignData.raised),
            deadline: Number(campaignData.deadline)
          };
          setCampaigns([...campaigns, newCampaign]);
          alert('Campaign created successfully!');
          e.target.reset();
        } catch (err) {
          console.error('Error creating campaign:', err);
          alert('Failed to create campaign: ' + err.message);
        }
      };

      const contribute = async (campaignId, amount) => {
        if (isDemo) {
          alert(`🎉 Demo Mode: Contributed ${amount} ETH successfully! In production, this would send real ETH.`);
          const updatedCampaigns = campaigns.map(c => 
            c.campaignId === campaignId 
              ? { ...c, raised: c.raised + (parseFloat(amount) * 1e18) }
              : c
          );
          setCampaigns(updatedCampaigns);
          return;
        }

        try {
          await contract.methods.contribute(campaignId)
            .send({ from: account, value: web3.utils.toWei(amount, 'ether'), gas: 1000000 });
          const campaignData = await contract.methods.campaigns(campaignId).call();
          
          await axios.post(`${API_BASE}/update-campaign`, {
            campaignId,
            raised: Number(campaignData.raised),
            completed: campaignData.completed
          });
          
          const updatedCampaign = {
            ...campaignData,
            goal: Number(campaignData.goal),
            raised: Number(campaignData.raised),
            deadline: Number(campaignData.deadline)
          };
          setCampaigns(campaigns.map(c => c.campaignId === campaignId ? updatedCampaign : c));
          alert('Contribution successful!');
        } catch (err) {
          console.error('Error contributing:', err);
          alert('Failed to contribute: ' + err.message);
        }
      };

      const releaseFunds = async (campaignId) => {
        if (isDemo) {
          alert('🎉 Demo Mode: Funds released successfully! In production, ETH would be transferred to creator.');
          const updatedCampaigns = campaigns.map(c => 
            c.campaignId === campaignId ? { ...c, completed: true } : c
          );
          setCampaigns(updatedCampaigns);
          return;
        }

        try {
          await contract.methods.releaseFunds(campaignId)
            .send({ from: account, gas: 1000000 });
          const campaignData = await contract.methods.campaigns(campaignId).call();
          
          await axios.post(`${API_BASE}/update-campaign`, {
            campaignId,
            raised: Number(campaignData.raised),
            completed: campaignData.completed
          });
          
          const updatedCampaign = {
            ...campaignData,
            goal: Number(campaignData.goal),
            raised: Number(campaignData.raised),
            deadline: Number(campaignData.deadline)
          };
          setCampaigns(campaigns.map(c => c.campaignId === campaignId ? updatedCampaign : c));
          alert('Funds released successfully!');
        } catch (err) {
          console.error('Error releasing funds:', err);
          alert('Failed to release funds: ' + err.message);
        }
      };

      return (
        <div className="min-h-screen text-white">
          {/* Hero Section */}
          <div className="hero-section">
            <div className="container mx-auto px-4">
              <h1 className="text-6xl font-extrabold mb-4 bg-clip-text text-transparent bg-gradient-to-r from-cyan-400 to-blue-600 fade-in floating">
                🚀 CrowdFund3D
              </h1>
              <p className="text-xl mb-8 fade-in opacity-90">
                Decentralized Crowdfunding Platform - Fund Dreams, Build Future
              </p>
              <div className="flex justify-center space-x-4 fade-in">
                <div className="glassmorphism px-6 py-3 rounded-full">
                  <span className="text-sm">🔒 Blockchain Secured</span>
                </div>
                <div className="glassmorphism px-6 py-3 rounded-full">
                  <span className="text-sm">⚡ Instant Transactions</span>
                </div>
                <div className="glassmorphism px-6 py-3 rounded-full">
                  <span className="text-sm">🌍 Global Access</span>
                </div>
              </div>
              {isDemo && (
                <div className="mt-6 glassmorphism px-6 py-3 rounded-full inline-block">
                  <span className="text-yellow-300">🎭 Demo Mode - Blockchain features simulated</span>
                </div>
              )}
            </div>
          </div>
          
          <div className="container mx-auto px-4 py-8">
            <div className="w-full max-w-7xl mx-auto">
              {showPrivateKeyInput ? (
                <div className="flex flex-col items-center w-full">
                  <div className="mb-8 p-8 glassmorphism w-full max-w-lg card fade-in">
                    <div className="text-center mb-6">
                      <div className="text-6xl mb-4">🔐</div>
                      <h2 className="text-3xl font-bold mb-2 bg-gradient-to-r from-cyan-400 to-blue-400 bg-clip-text text-transparent">
                        Connect Your Wallet
                      </h2>
                      <p className="text-gray-300">
                        Join the decentralized crowdfunding revolution
                      </p>
                    </div>
                    
                    <div className="bg-gradient-to-r from-yellow-500/20 to-orange-500/20 border border-yellow-500/30 rounded-lg p-4 mb-6">
                      <div className="flex items-start space-x-3">
                        <span className="text-yellow-400 text-xl">⚠️</span>
                        <div>
                          <p className="text-yellow-200 text-sm font-semibold mb-1">Demo Notice</p>
                          <p className="text-yellow-100 text-xs">
                            This is a demonstration. Blockchain features are simulated for portfolio showcase.
                          </p>
                        </div>
                      </div>
                    </div>

                    <div className="bg-gradient-to-r from-blue-500/20 to-purple-500/20 border border-blue-500/30 rounded-lg p-4 mb-6">
                      <h3 className="text-blue-200 font-semibold mb-2">🧪 Test Account Available:</h3>
                      <div className="bg-black/30 rounded p-3 mb-2">
                        <code className="text-xs text-green-300 break-all">
                          0xac0974bec39a17e36ba4a6b4d238ff944bacb478cbed5efcae784d7bf4f2ff80
                        </code>
                      </div>
                      <p className="text-blue-100 text-xs">
                        Demo private key for testing. Copy and paste it below.
                      </p>
                    </div>
                    
                    <form onSubmit={handlePrivateKeySubmit}>
                      <div className="relative mb-4">
                        <input
                          name="privateKey"
                          type="password"
                          placeholder="Enter private key or use demo key above"
                          className="w-full p-4 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:border-transparent"
                          required
                        />
                        <div className="absolute right-3 top-1/2 transform -translate-y-1/2">
                          <span className="text-gray-400">🔑</span>
                        </div>
                      </div>
                      <button
                        type="submit"
                        className="w-full px-6 py-4 bg-gradient-to-r from-cyan-500 to-blue-600 rounded-lg text-white font-bold btn hover:from-cyan-600 hover:to-blue-700 shadow-lg"
                      >
                        <span className="flex items-center justify-center space-x-2">
                          <span>🚀</span>
                          <span>Connect & Start Funding</span>
                        </span>
                      </button>
                    </form>
                    
                    <div className="mt-4 text-center">
                      <button
                        onClick={() => {
                          setIsDemo(true);
                          setShowPrivateKeyInput(false);
                          setAccount('0x742d35Cc6634C0532925a3b8D404d1C8b2d69C42');
                        }}
                        className="text-cyan-400 hover:text-cyan-300 underline text-sm"
                      >
                        Skip and try demo mode
                      </button>
                    </div>
                  </div>
                  
                  {/* How it works section */}
                  <div className="grid grid-cols-1 md:grid-cols-3 gap-6 w-full max-w-4xl mt-8">
                    <div className="glassmorphism p-6 text-center card fade-in">
                      <div className="text-4xl mb-4">💡</div>
                      <h3 className="text-xl font-semibold mb-2">Create Campaign</h3>
                      <p className="text-gray-300 text-sm">Launch your project and set funding goals</p>
                    </div>
                    <div className="glassmorphism p-6 text-center card fade-in">
                      <div className="text-4xl mb-4">💰</div>
                      <h3 className="text-xl font-semibold mb-2">Get Funded</h3>
                      <p className="text-gray-300 text-sm">Receive contributions from supporters worldwide</p>
                    </div>
                    <div className="glassmorphism p-6 text-center card fade-in">
                      <div className="text-4xl mb-4">🎯</div>
                      <h3 className="text-xl font-semibold mb-2">Achieve Goals</h3>
                      <p className="text-gray-300 text-sm">Release funds when targets are met</p>
                    </div>
                  </div>
                </div>
              ) : account ? (
                <div className="flex flex-col items-center w-full">
                  <div className="mb-8 flex flex-col sm:flex-row items-center justify-between glassmorphism p-4 rounded-lg fade-in w-full max-w-4xl">
                    <div className="flex items-center space-x-4 mb-4 sm:mb-0">
                      <div className="w-10 h-10 bg-gradient-to-r from-cyan-400 to-blue-500 rounded-full flex items-center justify-center">
                        <span className="text-white font-bold">👤</span>
                      </div>
                      <div>
                        <p className="text-sm text-gray-300">Connected Wallet {isDemo && '(Demo)'}</p>
                        <p className="text-lg font-semibold text-white">{account.slice(0, 6)}...{account.slice(-4)}</p>
                      </div>
                    </div>
                    <div className="flex space-x-3">
                      <button
                        onClick={() => {
                          navigator.clipboard.writeText(window.location.href);
                          alert('Platform link copied to clipboard! Share with friends 🚀');
                        }}
                        className="px-4 py-2 bg-gradient-to-r from-green-500 to-blue-500 rounded-lg text-white font-bold btn hover:from-green-600 hover:to-blue-600"
                      >
                        📤 Share Platform
                      </button>
                      <button
                        onClick={disconnectWallet}
                        className="px-4 py-2 bg-gradient-to-r from-red-500 to-pink-500 rounded-lg text-white font-bold btn hover:from-red-600 hover:to-pink-600"
                      >
                        🚪 Disconnect
                      </button>
                    </div>
                  </div>
                  
                  <form onSubmit={createCampaign} className="mb-12 p-8 glassmorphism w-full max-w-2xl mx-auto card fade-in">
                    <div className="text-center mb-6">
                      <div className="text-5xl mb-3">🚀</div>
                      <h2 className="text-3xl font-bold mb-2 bg-gradient-to-r from-cyan-400 to-blue-400 bg-clip-text text-transparent">
                        Launch Your Campaign
                      </h2>
                      <p className="text-gray-300">Turn your vision into reality with blockchain crowdfunding</p>
                    </div>
                    
                    <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                      <div>
                        <label className="block text-sm font-semibold text-gray-300 mb-2">📝 Campaign Title</label>
                        <input
                          name="title"
                          placeholder="e.g., Save the Ocean Project"
                          className="w-full p-4 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:border-transparent"
                          required
                        />
                      </div>
                      <div>
                        <label className="block text-sm font-semibold text-gray-300 mb-2">💰 Funding Goal (ETH)</label>
                        <input
                          name="goal"
                          type="number"
                          placeholder="1.0"
                          step="0.01"
                          min="0.01"
                          className="w-full p-4 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:border-transparent"
                          required
                        />
                      </div>
                    </div>
                    
                    <div className="mt-6">
                      <label className="block text-sm font-semibold text-gray-300 mb-2">⏰ Campaign Duration (Days)</label>
                      <input
                        name="duration"
                        type="number"
                        placeholder="30"
                        min="1"
                        max="365"
                        className="w-full p-4 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:border-transparent"
                        required
                      />
                    </div>
                    
                    <button
                      type="submit"
                      className="w-full mt-8 px-6 py-4 bg-gradient-to-r from-green-500 to-blue-600 rounded-lg text-white font-bold btn hover:from-green-600 hover:to-blue-700 shadow-lg pulse"
                    >
                      <span className="flex items-center justify-center space-x-2">
                        <span>🎯</span>
                        <span>Launch Campaign</span>
                      </span>
                    </button>
                  </form>
                  
                  {/* Campaign Statistics */}
                  {campaigns.length > 0 && (
                    <div className="mb-8 grid grid-cols-1 sm:grid-cols-3 gap-4 fade-in w-full max-w-4xl">
                      <div className="glassmorphism p-4 text-center">
                        <div className="text-2xl font-bold text-cyan-400">{campaigns.length}</div>
                        <div className="text-sm text-gray-300">Active Campaigns</div>
                      </div>
                      <div className="glassmorphism p-4 text-center">
                        <div className="text-2xl font-bold text-green-400">
                          {(campaigns.reduce((total, c) => total + Number(c.raised), 0) / 1e18).toFixed(1)} ETH
                        </div>
                        <div className="text-sm text-gray-300">Total Raised</div>
                      </div>
                      <div className="glassmorphism p-4 text-center">
                        <div className="text-2xl font-bold text-purple-400">
                          {campaigns.filter(c => c.completed).length}
                        </div>
                        <div className="text-sm text-gray-300">Completed</div>
                      </div>
                    </div>
                  )}
                  
                  <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 w-full">
                    {campaigns.map((campaign, index) => {
                      const progressPercentage = Math.min((Number(campaign.raised) / Number(campaign.goal)) * 100, 100);
                      const isCompleted = campaign.completed;
                      const isCreator = account.toLowerCase() === campaign.creator.toLowerCase();
                      const daysLeft = Math.max(0, Math.ceil((Number(campaign.deadline) * 1000 - Date.now()) / (1000 * 60 * 60 * 24)));
                      
                      const campaignImages = [
                        'https://images.unsplash.com/photo-1559827260-dc66d52bef19?w=400&h=200&fit=crop',
                        'https://images.unsplash.com/photo-1542601906990-b4d3fb778b09?w=400&h=200&fit=crop',
                        'https://images.unsplash.com/photo-1518837695005-2083093ee35b?w=400&h=200&fit=crop',
                        'https://images.unsplash.com/photo-1441974231531-c6227db76b6e?w=400&h=200&fit=crop',
                        'https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=400&h=200&fit=crop'
                      ];
                      const campaignImage = campaignImages[index % campaignImages.length];
                      
                      return (
                        <div key={index} className="glassmorphism overflow-hidden card fade-in">
                          <div className="relative">
                            <img 
                              src={campaignImage} 
                              alt={campaign.title}
                              className="campaign-image"
                              onError={(e) => {
                                e.target.src = `data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 400 200"><rect width="400" height="200" fill="%23667eea"/><text x="200" y="100" text-anchor="middle" dy=".3em" fill="white" font-size="24" font-family="Arial">🚀 ${campaign.title.slice(0, 10)}...</text></svg>`;
                              }}
                            />
                            {isCompleted && (
                              <div className="absolute top-4 right-4 bg-green-500 text-white px-3 py-1 rounded-full text-sm font-bold">
                                ✅ Completed
                              </div>
                            )}
                            {!isCompleted && daysLeft <= 3 && (
                              <div className="absolute top-4 right-4 bg-red-500 text-white px-3 py-1 rounded-full text-sm font-bold pulse">
                                ⏰ {daysLeft}d left
                              </div>
                            )}
                          </div>
                          
                          <div className="p-6">
                            <h3 className="text-xl font-bold text-white mb-3 line-clamp-2">{campaign.title}</h3>
                            
                            <div className="flex justify-between items-center mb-4">
                              <div>
                                <p className="text-2xl font-bold text-cyan-400">
                                  {(Number(campaign.raised) / 1e18).toFixed(2)} ETH
                                </p>
                                <p className="text-sm text-gray-300">
                                  of {(Number(campaign.goal) / 1e18).toFixed(2)} ETH goal
                                </p>
                              </div>
                              <div className="text-right">
                                <p className="text-lg font-semibold text-white">{progressPercentage.toFixed(0)}%</p>
                                <p className="text-sm text-gray-300">{daysLeft} days left</p>
                              </div>
                            </div>
                            
                            <div className="w-full bg-gray-700 rounded-full h-3 mb-4 overflow-hidden">
                              <div
                                className="progress-bar h-3 rounded-full transition-all duration-500"
                                style={{ width: `${progressPercentage}%` }}
                              ></div>
                            </div>
                            
                            <div className="text-xs text-gray-400 mb-4">
                              <p>Creator: {campaign.creator.slice(0, 6)}...{campaign.creator.slice(-4)}</p>
                              <p>Deadline: {new Date(Number(campaign.deadline) * 1000).toLocaleDateString()}</p>
                            </div>
                            
                            {!isCompleted && (
                              <form
                                onSubmit={(e) => {
                                  e.preventDefault();
                                  contribute(campaign.campaignId, e.target.amount.value);
                                  e.target.reset();
                                }}
                                className="mb-4"
                              >
                                <div className="flex space-x-2">
                                  <input
                                    name="amount"
                                    type="number"
                                    placeholder="0.1"
                                    step="0.01"
                                    min="0.01"
                                    className="flex-1 p-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-cyan-500"
                                    required
                                  />
                                  <button
                                    type="submit"
                                    className="px-6 py-3 bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg text-white font-bold btn hover:from-blue-600 hover:to-purple-700"
                                  >
                                    💝 Fund
                                  </button>
                                </div>
                              </form>
                            )}
                            
                            {isCreator && !isCompleted && progressPercentage >= 100 && (
                              <button
                                onClick={() => releaseFunds(campaign.campaignId)}
                                className="w-full px-4 py-3 bg-gradient-to-r from-green-500 to-emerald-600 rounded-lg text-white font-bold btn hover:from-green-600 hover:to-emerald-700 pulse"
                              >
                                <span className="flex items-center justify-center space-x-2">
                                  <span>💰</span>
                                  <span>Release Funds</span>
                                </span>
                              </button>
                            )}
                          </div>
                        </div>
                      );
                    })}
                  </div>
                </div>
              ) : (
                <div className="flex flex-col items-center w-full">
                  <p className="text-lg fade-in">Connecting to blockchain...</p>
                  <div className="mt-4">
                    <button
                      onClick={() => setShowPrivateKeyInput(true)}
                      className="px-4 py-2 bg-gray-600 rounded-lg text-white font-bold btn hover:bg-gray-700"
                    >
                      Back to Connection
                    </button>
                  </div>
                </div>
              )}
            </div>
            
            {/* Footer */}
            <footer className="mt-16 py-8 border-t border-white/10">
              <div className="container mx-auto px-4 text-center">
                <div className="glassmorphism inline-block px-8 py-4 rounded-full">
                  <p className="text-gray-300">
                    Built with ❤️ on Ethereum • Powered by Web3 • 
                    <span className="text-cyan-400 font-semibold"> CrowdFund3D</span>
                  </p>
                </div>
              </div>
            </footer>
          </div>
        </div>
      );
    };

    const root = createRoot(document.getElementById('root'));
    root.render(<App />);
  </script>
</body>
</html>